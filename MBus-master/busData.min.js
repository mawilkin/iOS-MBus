function getLocation(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(findClosest)}else{console.log("Geolocation is not supported by this browser.")}}function findClosest(e){console.log("Latitude: "+e.coords.latitude);console.log("Longitude: "+e.coords.longitude);var t=[];var n="http://54.164.44.218:8001/stops";$.get(n,function(n){var r=n;for(s in r){var i=Math.sqrt(Math.pow(r[s].lat-e.coords.latitude,2)+Math.pow(r[s].lon-e.coords.longitude,2));if(r[s].active==true){t.push({name:r[s].name,id:r[s].id,dist:Math.abs(i)})}}t.sort(function(e,t){return e.dist-t.dist});for(var s=0;s<10;++s){if(s<3){var o='<stop-card id="card'+s+'" stopID="'+t[s].id+'" name="'+t[s].name+'"></stop-card>';$("#stop-div").append(o)}else if(s==3){$("#stop-div").append('<template id="hidden-cards">');var o='<stop-card id="card'+s+'" stopID="'+t[s].id+'" name="'+t[s].name+'"></stop-card>';document.getElementById("hidden-cards").innerHTML+=o}else if(s==9){var o='<stop-card id="card'+s+'" stopID="'+t[s].id+'" name="'+t[s].name+'"></stop-card>';document.getElementById("hidden-cards").innerHTML+=o;$("#stop-div").append("</template>")}else{var o='<stop-card id="card'+s+'" stopID="'+t[s].id+'" name="'+t[s].name+'"></stop-card>';document.getElementById("hidden-cards").innerHTML+=o}}$("#more_btn").removeProp("hidden")})}$("#refresh").click(function(){console.log("refreshing");var e=$("#stop-div").html();$("#stop-div").html("");$("#stop-div").html(e)});$("#locate").click(function(){$("#stop-div").html("");getLocation();$("#more_btn").show()});$("#more_btn").click(function(){$("#more_btn").hide();var e=document.getElementById("hidden-cards").innerHTML;console.log(e);$("#stop-div").append(e)});getLocation()